## Wallet API

An implementation of a Wallet API built on Akka Typed making using of event sourcing (using the JDBC plugin) and 
distributed by Akka Cluster Sharding.

Deposits and Withdrawals follow a fee structure (the more money in your account, the cheaper it becomes to transact).
The amount of money generated by fees is calculated via a Persistence Query but is not currently exposed but can be 
accessed by querying the `processor` table.

### Running the application
1. Make sure to spin up Postgres via `docker-compose up -d`
2. Run the application using IntelliJ, Visual Studio Code + Metals or just `sbt run`

### Postman
A Postman collection is included for easy testing in the `postman` folder

### Operations

#### Create 
`POST /wallets`
```json
{
  "id": "abc"
}
```

#### Deposit
`POST /wallets/<id>/deposit`
```json
{
  "amount": 2000
}
```

#### Withdraw
`POST /wallets/<id>/withdraw`
```json
{
  "amount": 2000
}
```

#### Query Deposit Fee
`POST /wallets/<id>/depositFee`
```json
{
  "amount": 2000
}
```

#### Query Withdraw Fee
`POST /wallets/<id>/withdrawFee`
```json
{
  "amount": 2000
}
```

#### Immediate history
`GET /wallets/abc/history/immediate`

#### All history
`GET /wallets/abc/history/all`